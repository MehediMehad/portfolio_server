generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  name               String
  profilePhoto       String
  contactNumber      String
  role               UserRole
  email              String   @unique
  password           String
  aboutMe            String
  designation        String
  projectCount       Int      @default(0)
  blogCount          Int      @default(0)
  skillCount         Int      @default(0)
  gender             Gender   @default(Male)
  needPasswordChange Boolean  @default(true)
  address            String
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@map("users")
}

model Projects {
  id                 String            @id @default(auto()) @map("_id") @db.ObjectId
  image              String
  title              String
  overview           String
  description        String
  techStack          String[]
  features           String[]
  whatILearned       String[]
  futureImprovements String[]
  liveURL            String
  gitHubURL          String
  is_public          Boolean           @default(true)
  isDeleted          Boolean           @default(false)
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  featuredProjects   FeaturedProjects?

  @@index([title])
  @@index([overview])
  @@index([createdAt])
  @@index([is_public])
  @@index([isDeleted])
  @@index([techStack], name: "techStack_index")
  @@map("projects")
}

model FeaturedProjects {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  projectId String   @db.ObjectId
  project   Projects @relation(fields: [projectId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([projectId])
  @@map("featured_projects")
}

model Blogs {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  title      String
  overview   String
  image      String
  content    String
  tags       String[]
  is_public  Boolean  @default(true)
  isFeatured Boolean  @default(false)
  isDeleted  Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("blogs")
}

model Skills {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  name         String   @unique
  level        String
  icon         String
  isDeleted    Boolean  @default(false)
  heroSection  Boolean  @default(false)
  is_public    Boolean  @default(true)
  skillCount   Int      @default(0)
  projectCount Int      @default(0)
  blogCount    Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("skills")
}

model SocialMedia {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  platformName String   @unique
  url          String
  icon         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("social_media")
}

enum ProjectStatus {
  PUBLIC
  PRIVATE
}

enum UserRole {
  ADMIN
  USER
}

enum UserStatus {
  ACTIVE
  BLOCKED
  DELETED
}

enum Gender {
  Male
}
